{% extends "base.html" %} {% block content %}

<div class="p-4">
  <h1 class="text-3xl font-bold mb-6">Dashboard</h1>

  <p class="text-lg mb-6 p-5">
    Welcome, {{ request.user.username }} ({{ role|title }} - Group => {{group}})
  </p>

  <!-- Admin View -->
  {% if role == "admin" %}
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
    <div class="card bg-primary text-primary-content p-4">
      <h2 class="text-xl">Users</h2>
      <p class="text-3xl font-bold">{{ total_users }}</p>
    </div>

    <div class="card bg-secondary text-secondary-content p-4">
      <h2 class="text-xl">Groups</h2>
      <p class="text-3xl font-bold">{{ total_groups }}</p>
    </div>

    <div class="card bg-accent text-accent-content p-4">
      <h2 class="text-xl">Events</h2>
      <p class="text-3xl font-bold">{{ total_events }}</p>
    </div>

    <div class="card bg-info text-info-content p-4">
      <h2 class="text-xl">Sermons</h2>
      <p class="text-3xl font-bold">{{ total_sermons }}</p>
    </div>
  </div>

  {% endif %}

  <!--Pastor's View-->

  {% if role == "pastor" %}
  <h2 class="text-2xl font-bold mb-3">My Sermons</h2>
  <div class="space-y-2 mb-6">
    {% for sermon in my_sermons %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ sermon.title }}</h3>
      <p>{{ sermon.date }}</p>
    </div>
    {% empty %}
    <p>No sermons yet.</p>
    {% endfor %}
  </div>

  <h2 class="text-2xl font-bold mb-3">Upcoming Global Events</h2>
  <div class="space-y-2 mb-6">
    {% for event in upcoming_events %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ event.title }}</h3>
      <p>{{ event.date }}</p>
    </div>
    {% empty %}
    <p>No upcoming events.</p>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Group Leader view -->
  {% if role == "leader" %}
  <h2 class="text-2xl font-bold mb-3">My Group Events</h2>
  <div class="space-y-2 mb-6">
    {% for event in group_events %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ event.title }}</h3>
      <p>{{ event.date }}</p>
    </div>
    {% empty %}
    <p>No upcoming group events.</p>
    {% endfor %}
  </div>

  <h2 class="text-2xl font-bold mb-3">My Group Sermons</h2>
  <div class="space-y-2 mb-6">
    {% for sermon in group_sermons %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ sermon.title }}</h3>
      <p>{{ sermon.date }}</p>
    </div>
    {% empty %}
    <p>No sermons yet.</p>
    {% endfor %}
  </div>

  <h2 class="text-2xl font-bold mb-3">All Sermons</h2>
  <div class="space-y-2 mb-6">
    {% for sermon in all_sermons %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ sermon.title }}</h3>
      <p>{{ sermon.date }}</p>
    </div>
    {% empty %}
    <p>No sermons yet.</p>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Member view -->
  {% if role == "member" %}
  <h2 class="text-2xl font-bold mb-3">Upcoming Global Events</h2>
  <div class="space-y-2 mb-6">
    {% for event in upcoming_events %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ event.title }}</h3>
      <p>{{ event.date }}</p>
    </div>
    {% empty %}
    <p>No upcoming events.</p>
    {% endfor %}
  </div>

  <h2 class="text-2xl font-bold mb-3">Latest Sermons</h2>
  <div class="space-y-2 mb-6">
    {% for sermon in latest_sermons %}
    <div class="p-4 border rounded bg-base-100 shadow">
      <h3 class="font-semibold">{{ sermon.title }}</h3>
      <p>{{ sermon.date }}</p>
    </div>
    {% empty %}
    <p>No sermons yet.</p>
    {% endfor %}
  </div>
  {% endif %} {% comment %}
  <!-- Upcoming Events -->
  <div class="mb-10">
    <h2 class="text-2xl font-bold mb-3">Upcoming Events</h2>
    <div class="space-y-2">
      {% for event in upcoming_events %}
      <div class="p-4 border rounded bg-base-100 shadow">
        <h3 class="font-semibold">{{ event.title }}</h3>
        <p>{{ event.date }}</p>
      </div>
      {% empty %}
      <p>No upcoming events.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Latest Sermons -->
  <div>
    <h2 class="text-2xl font-bold mb-3">Latest Sermons</h2>
    <div class="space-y-2">
      {% for sermon in latest_sermons %}
      <div class="p-4 border rounded bg-base-100 shadow">
        <h3 class="font-semibold">{{ sermon.title }}</h3>
        <p>{{ sermon.date }}</p>
      </div>
      {% empty %}
      <p>No sermons available.</p>
      {% endfor %}
    </div>
  </div>
  {% endcomment %}
</div>

{% endblock %}
